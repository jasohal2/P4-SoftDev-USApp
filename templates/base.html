<!-- templates/base.html -->
{% load static %}
<!DOCTYPE html>
  <head>
    <title>LITReview</title>
    <link rel="stylesheet" href="{% static 'style.css' %}" />
    <script
      src="https://kit.fontawesome.com/d760ca934c.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <nav>
      <div class="nav_home"><a href="{% url 'home' %}">LITReview</a></div>
      <div class="nav_search">
        <form
          method="get"
          action="{% url 'search' %}"
          style="margin: 0; display: inline"
        >
          <div class="search-wrapper">
            <input
              type="text"
              name="q"
              placeholder="Search users or books"
              value="{{ request.GET.q }}"
            />
            <button type="submit">
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>
          </div>
        </form>
      </div>
      <div class="nav_profile">
        {% if user.is_authenticated %}
        <a href="{% url 'user_profile' user.username %}">My Profile</a>
        <a href="{% url 'logout' %}">Log out</a>
        {% else %}
        <a href="{% url 'login' %}">Login/Sign Up</a>
        {% endif %}
      </div>
    </nav>
    {% block content %} {% endblock content %}
    <script>
    // Generic deletion confirm (progressive enhancement)
    document.addEventListener('click', function(e){
      const btn = e.target.closest('[data-confirm-delete]');
      if(!btn) return;
      const form = btn.closest('form');
      if(!form) return;
      const label = btn.getAttribute('data-item-label') || 'this item';
      const msg = `Are you sure you want to delete ${label}? This cannot be undone.`;
      if(!window.confirm(msg)) {
        e.preventDefault();
        e.stopPropagation();
      }
    });
    </script>
  </body>
</html>
